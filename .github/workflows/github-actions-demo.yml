name: GitHub Actions Demo

on: [push]


jobs:
  Explore-GitHub-Actions:
    runs-on: ubuntu-latest
  
    steps:
      - uses: actions/checkout@v4

      - run: docker compose build house-price-prediction

      - run: docker tag house-price-prediction floriansgd/embarqueml

      - run: echo ${{secrets.DOCKER_PASSWORD}} | docker login --username ${{secrets.DOCKER_USERNAME}} --password-stdin

      - run: docker push floriansgd/embarqueml

      - run: echo ${{secrets.VM_PASSWORD}} | ssh ubuntu@17.2.2.1 "docker compose pull floriansgd/embarqueml"

      # - run: "(re)start container"